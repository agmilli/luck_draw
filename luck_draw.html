<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,maximum-scale=1, maximum-scale=1" />
	<title>luck_draw</title>
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/luck_draw.css">
	<script src="js/base.js"></script>
	<script src="js/zepto.js"></script>
	<script src="js/touch.js"></script>
	
</head>
<body>
<!-- 头部开始 -->
<header>
	<a href="#"><</a>
	<h1>我的收益</h1>
</header>
<!-- 头部结束 -->
<section>
	<!-- 个人信息开始 -->
	<div class="message">
		<div class="left fl">
			<h1><img src="images/people.png" alt=""></h1>
			<p>请登录</p>
		</div>
		<div class="right fr">
			<div class="top">
				可用积分<span>155</span>
			</div>
			<div class="bottom">
				<a href="#">积分记录</a>
				<a href="#">赚积分</a>
			</div>
		</div>
	</div>
	<!-- 个人信息结束 -->
	<!-- 抽奖开始 -->
	<div class="luck_draw">
		<h2><span>小积分撞大运</span><a href="#">抽奖规则>></a></h2>
		<div class="bigbox">
		<!-- 9个开始 -->
			<div class="box">
				<div class="minbox">
					<h3>108元</h3>
					<span>108元现金券</span>
				</div>
			</div>
			<div class="box">
				<div class="minbox">
					<h3>8元</h3>
					<span>8元现金券</span>
				</div>
			</div>
			<div class="box">
				<div class="minbox">
					<h3>58元</h3>
					<span>58元现金券</span>
				</div>
			</div>
			<div class="box">
				<div class="minbox">
					<h3>2元</h3>
					<span>2元现金券</span>
				</div>
			</div>
			<div class="box click">
				<div class="minbox">
					<p>立即抽奖</p>
					(50积分/次)
				</div>
			</div>
			<div class="box">
				<div class="minbox">
					<h3>18元</h3>
					<span>18元现金券</span>
				</div>
			</div>
			<div class="box">
				<div class="minbox">
					<h3>68元</h3>
					<span>68元现金券</span>
				</div>
			</div>
			<div class="box jifeng">
				<div class="minbox">
					<span>50积分</span>
				</div>
			</div>
			<div class="box">
				<div class="minbox">
					<h3>38元</h3>
					<span>38元现金券</span>
				</div>
			</div>
		<!-- 9个结束 -->
		</div>	
		<div class="list">
			<ul>
				<li><span>Y*****4</span><i>获得</i><em>50积分</em></li>
				<li><span>Y*****5</span><i>获得</i><em>50积分</em></li>
				<li><span>Y*****6</span><i>获得</i><em>50积分</em></li>
				<li><span>Y*****7</span><i>获得</i><em>50积分</em></li>
			</ul>
		</div>
	</div>
	<!-- 抽奖结束 -->
	<!-- 积分兑换开始 -->
	<div class="exchange">
		<div class="bigbox">
			<div class="box">
				<strong>12</strong>
				<div class="minbox">
					<p><span>元</span><br>投资红包</p>
					<i>30积分</i>
				</div>
			</div>
			<p>投资金额≥1800元可用</p>
			<a href="#">立即兑换</a>
		</div>
		<div class="bigbox">
			<div class="box">
				<strong>18</strong>
				<div class="minbox">
					<p><span>元</span><br>投资红包</p>
					<i>30积分</i>
				</div>
			</div>
			<p>投资金额≥1800元可用</p>
			<a href="#">立即兑换</a>
		</div>
		<div class="bigbox">
			<div class="box">
				<strong>38</strong>
				<div class="minbox">
					<p><span>元</span><br>投资红包</p>
					<i>30积分</i>
				</div>
			</div>
			<p>投资金额≥1800元可用</p>
			<a href="#">立即兑换</a>
		</div>
		<div class="bigbox">
			<div class="box">
				<strong>58</strong>
				<div class="minbox">
					<p><span>元</span><br>投资红包</p>
					<i>30积分</i>
				</div>
			</div>
			<p>投资金额≥1800元可用</p>
			<a href="#">立即兑换</a>
		</div>
		<div class="bigbox">
			<div class="box">
				<strong>88</strong>
				<div class="minbox">
					<p><span>元</span><br>投资红包</p>
					<i>30积分</i>
				</div>
			</div>
			<p>投资金额≥1800元可用</p>
			<a href="#">立即兑换</a>
		</div>
		<div class="bigbox">
			<div class="box">
				<strong>128</strong>
				<div class="minbox">
					<p><span>元</span><br>投资红包</p>
					<i>30积分</i>
				</div>
			</div>
			<p>投资金额≥1800元可用</p>
			<a href="#">立即兑换</a>
		</div>
	</div>
	<!-- 积分兑换结束 -->
</section>
<!-- 弹窗 -->
<div class="bigpopup">
	<div class="popup">
		<div class="minpopup">
			<div class="top">
				<img src="images/get.jpg" alt="">
			</div>
			<div class="bottom">
				<p>你的积分不够50分，不能参加抽奖!</p>
				<a href="javascript:void(0);">确认</a>
			</div>
		</div>	
	</div>
</div>	
<script>
	$(function(){
		// 显示用户抽奖得到的积分
		fraction();
		function fraction(){
			var i=0;
			var t=setInterval(function(){
				i++;
				if(i>3){i=0}
				$('.luck_draw').find('.list ul').css('top',-0.67*i+'rem')
			},2000);
		}
		// 抽奖
		luck_draw();
		function luck_draw(){
			var arr=[0,1,2,5,8,7,6,3];
			var flp=true;
			$('.bigbox').find('.click').on('tag click',function(){
				if(flp){
					var i=Math.floor(Math.random()*9);
					var x=Math.floor(Math.random()*8)+40;
					var t=setInterval(round,60);
					
					function round(){
						flp=false;
						i++;
						if(i>arr.length-1){i=0;}
						$('.box').removeClass('active');
						$('.bigbox').find('.box').eq(arr[i]).addClass('active');
						x--;
						if(x<25){
							clearInterval(t);
							t=setInterval(round,100);
						}
						if(x<20){
							clearInterval(t);
							t=setInterval(round,150);
						}
						if(x<15){
							clearInterval(t);
							t=setInterval(round,200);
						}
						if(x<10){
							clearInterval(t);
							t=setInterval(round,300);
						}
						if(x<7){
							clearInterval(t);
							t=setInterval(round,400);
						}
						if(x<4){
							clearInterval(t);
							t=setInterval(round,500);
						}
						if(x<0){
							clearInterval(t);
							$('.bigpopup').css('display','block');
							var str=$('.bigbox').find('.box').eq(arr[i]).find('span').text();
							$('.bigpopup').find('p').text(str);
							$('.bigpopup').find('a').on('tap click',function(){
								$('.bigpopup').css('display','none');
								flp=true;
							})
						}	
					}
				}

			})
		}
				
	})
</script>
	
</body>
</html>